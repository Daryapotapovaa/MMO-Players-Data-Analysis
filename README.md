# üéÆ –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ú–ú–û ‚Äî –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã–µ –ø–æ–∫—É–ø–∫–∏

–ü—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ SQL –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ –æ—Ç **–Ø–Ω–¥–µ–∫—Å.–ü—Ä–∞–∫—Ç–∏–∫—É–º**.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –∏–∑—É—á–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∏–≥—Ä–æ–∫–æ–≤ –∏ –∏—Ö –∏–≥—Ä–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –Ω–∞ –ø–æ–∫—É–ø–∫—É –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–æ–π –≤–∞–ª—é—Ç—ã ¬´—Ä–∞–π—Å–∫–∏–µ –ª–µ–ø–µ—Å—Ç–∫–∏¬ª, –∞ —Ç–∞–∫–∂–µ –æ—Ü–µ–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–∏–∏ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫.

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:

1. **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∏–∑—É—á–µ–Ω–∏–µ –¥–æ–ª–∏ –ø–ª–∞—Ç—è—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–∫—É–ø–æ–∫, –≤—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤.
2. **–†–µ—à–µ–Ω–∏–µ ad hoc –∑–∞–¥–∞—á–∏** ‚Äî –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–æ–≤ –æ—Ç —Ä–∞—Å—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ö–µ–º—É `fantasy` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:

| –¢–∞–±–ª–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `users` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–æ–∫–∞—Ö (ID, —Ä–∞—Å–∞, —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç—è—â–µ–≥–æ) |
| `race` | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π |
| `events` | –î–∞–Ω–Ω—ã–µ –æ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã—Ö –ø–æ–∫—É–ø–∫–∞—Ö (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å—Ç–æ–∏–º–æ—Å—Ç—å) |
| `items` | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ |

## üîç –ß–∞—Å—Ç—å 1. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–¥–∞—á–∞ 1 ¬∑ –î–æ–ª—è –ø–ª–∞—Ç—è—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤

#### 1.1. –û–±—â–∞—è –¥–æ–ª—è –ø–ª–∞—Ç—è—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–î–æ–ª—è –ø–ª–∞—Ç—è—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç **0.177** (17,7%).

#### 1.2. –î–æ–ª—è –ø–ª–∞—Ç—è—â–∏—Ö –≤ —Ä–∞–∑—Ä–µ–∑–µ —Ä–∞—Å—ã

| –†–∞—Å–∞ | –î–æ–ª—è –ø–ª–∞—Ç—è—â–∏—Ö | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---|---|---|
| **Demon** | **0.194** | –ú–∞–∫—Å–∏–º—É–º, —Å–∞–º–∞—è –º–∞–ª–æ—á–∏—Å–ª–µ–Ω–Ω–∞—è —Ä–∞—Å–∞ |
| Hobbit | 0.181 | ‚Äî |
| Elf | **0.171** | –ú–∏–Ω–∏–º—É–º |

> –†–∞—Å–∞ Demon –ø—Ä–∏ –Ω–∞–∏–º–µ–Ω—å—à–µ–π —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑–∞–ª–∞ –Ω–∞–∏–±–æ–ª—å—à—É—é –∫–æ–Ω–≤–µ—Ä—Å–∏—é –≤ –ø–ª–∞—Ç—è—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤.

### –ó–∞–¥–∞—á–∞ 2 ¬∑ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫

#### 2.1. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–∫—É–ø–æ–∫

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫ | 1 307 678 |
| –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å | 0 (–∞–Ω–æ–º–∞–ª–∏—è) |
| –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å | 486 615.1 |
| –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | 525.7 |
| –ú–µ–¥–∏–∞–Ω–∞ | 74.9 |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ | 2 517.3 |

> –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—Ä–µ–¥–Ω–∏–º (525.7) –∏ –º–µ–¥–∏–∞–Ω–æ–π (74.9), –∞ —Ç–∞–∫–∂–µ –≤—ã—Å–æ–∫–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É—é—Ç –æ —Å–∏–ª—å–Ω–æ–º —Ä–∞–∑–±—Ä–æ—Å–µ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞–ª–∏—á–∏–∏ –≤—ã–±—Ä–æ—Å–æ–≤.

#### 2.2. –ê–Ω–æ–º–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏

–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ **904 –ø–æ–∫—É–ø–∫–∏** —Å –Ω—É–ª–µ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é (–¥–æ–ª—è –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ ‚Äî 0,07%).

#### 2.3. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —ç–ø–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã

| –ü—Ä–µ–¥–º–µ—Ç | –ü—Ä–æ–¥–∞–∂–∏ | –î–æ–ª—è –æ—Ç –≤—Å–µ—Ö –ø–æ–∫—É–ø–æ–∫ | –î–æ–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π |
|---|---|---|---|
| Book of Legends | 1 004 516 | 77% | 88% |
| Bag of Holding | 271 875 | 21% | 87% |

> –î–≤–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ —Å—É–º–º–∞—Ä–Ω–æ –ø–æ–∫—Ä—ã–≤–∞—é—Ç **98% –≤—Å–µ—Ö –ø—Ä–æ–¥–∞–∂**. –ü–æ–¥–∞–≤–ª—è—é—â–µ–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–ª–∏ –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö —Ö–æ—Ç—è –±—ã —Ä–∞–∑.

## üéØ –ß–∞—Å—Ç—å 2. Ad Hoc –∑–∞–¥–∞—á–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–æ–≤ –æ—Ç —Ä–∞—Å—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

- –î–æ–ª—è –∏–≥—Ä–æ–∫–æ–≤, —Å–æ–≤–µ—Ä—à–∞—é—â–∏—Ö –ø–æ–∫—É–ø–∫–∏, –∫ –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç **60‚Äì63%** –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–∞—Å—ã ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ö–æ–∂–∏.
- –ù–∞–∏–±–æ–ª—å—à–∞—è –¥–æ–ª—è –ø–ª–∞—Ç—è—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ —Å—Ä–µ–¥–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π ‚Äî —É —Ä–∞—Å—ã **Demon (20%)**.
- –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫ –Ω–∞ –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞:

| –†–∞—Å–∞ | –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª-–≤–æ –ø–æ–∫—É–ø–æ–∫ | –°—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ |
|---|---|---|
| **Human** | **121** (–º–∞–∫—Å–∏–º—É–º) | ‚Äî |
| **Demon** | **78** (–º–∏–Ω–∏–º—É–º) | ‚Äî |
| **Elf** | ‚Äî | –ú–∞–∫—Å–∏–º—É–º |

> **–ì–∏–ø–æ—Ç–µ–∑–∞** –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –∏–≥—Ä—ã –∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Ä–∞–∑–Ω—ã—Ö —Ä–∞—Å —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫ —ç–ø–∏—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤, **–Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞—Å—å**.

## üí° –û–±—â–∏–µ –≤—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ù–∞ –ø–æ–∫—É–ø–∫—É ¬´—Ä–∞–π—Å–∫–∏—Ö –ª–µ–ø–µ—Å—Ç–∫–æ–≤¬ª –≤–ª–∏—è–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞—Å–∞, –Ω–æ –∏ –∫–ª–∞—Å—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ ‚Äî –¥–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ —Ä–∞–∑—Ä–µ–∑–µ **–∫–ª–∞—Å—Å–æ–≤ –∏ –Ω–∞–≤—ã–∫–æ–≤**.
- –†–∞—Å–∞ **Demon** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∏–±–æ–ª—å—à—É—é –∫–æ–Ω–≤–µ—Ä—Å–∏—é –≤ –ø–ª–∞—Ç—è—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –º–∞–ª—É—é —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è **—Ç–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π**.
- –†–∞—Å–∞ **Human** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫ –Ω–∞ –∏–≥—Ä–æ–∫–∞ ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è **–∫—Ä–æ—Å—Å-–ø—Ä–æ–¥–∞–∂ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ–±—ä—ë–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤**.
- –†–∞—Å–∞ **Elf** –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª—å—à–µ–π —Å—Ä–µ–¥–Ω–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –ø–æ–∫—É–ø–∫–∏ ‚Äî –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π **–ø—Ä–µ–º–∏—É–º-–∫–æ–Ω—Ç–µ–Ω—Ç–∞**.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **PostgreSQL** ‚Äî –°–£–ë–î
- **SQL** ‚Äî CTE, –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`PERCENTILE_DISC`, `STDDEV`), –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã
